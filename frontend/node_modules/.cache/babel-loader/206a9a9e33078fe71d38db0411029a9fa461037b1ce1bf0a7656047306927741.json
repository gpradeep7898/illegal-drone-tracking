{"ast":null,"code":"var _jsxFileName = \"/Users/pradeepgatti/Desktop/IllegalDroneTracking/illegal-drone-tracking/frontend/src/components/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport DroneMap from \"./DroneMap\";\nimport DroneUpdates from \"./DroneUpdates\";\nimport DroneValidation from \"./DroneValidation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  // Centralized state for drones and restricted zones\n  const [droneData, setDroneData] = useState([]);\n  const [restrictedZones, setRestrictedZones] = useState([]);\n  const [lastUpdated, setLastUpdated] = useState(\"\");\n  const socketRef = useRef(null);\n  useEffect(() => {\n    // 1) Fetch initial data\n    const fetchDroneData = async () => {\n      try {\n        const response = await fetch(\"http://127.0.0.1:8000/fetch-drones-live\");\n        const data = await response.json();\n        setDroneData(data.drones || []);\n        setLastUpdated(new Date().toLocaleTimeString());\n      } catch (error) {\n        console.error(\"Error fetching drone data:\", error);\n        setDroneData([]); // fallback\n      }\n    };\n    const fetchRestrictedZones = async () => {\n      try {\n        const response = await fetch(\"http://127.0.0.1:8000/restricted-zones\");\n        const data = await response.json();\n        setRestrictedZones(data.restricted_zones || []);\n      } catch (error) {\n        console.error(\"Error fetching restricted zones:\", error);\n        setRestrictedZones([]);\n      }\n    };\n    fetchDroneData();\n    fetchRestrictedZones();\n\n    // 2) Setup WebSocket for live updates\n    socketRef.current = new WebSocket(\"ws://localhost:8000/ws\");\n    socketRef.current.onopen = () => {\n      console.log(\"‚úÖ WebSocket Connected\");\n    };\n    socketRef.current.onmessage = event => {\n      try {\n        const receivedData = JSON.parse(event.data);\n        if (receivedData.drones && Array.isArray(receivedData.drones)) {\n          setDroneData(receivedData.drones);\n          setLastUpdated(new Date().toLocaleTimeString());\n        } else {\n          console.warn(\"‚ö†Ô∏è Unexpected WebSocket Data Format:\", receivedData);\n        }\n      } catch (error) {\n        console.error(\"‚ùå WebSocket Error Parsing Data:\", event.data);\n      }\n    };\n    socketRef.current.onerror = error => {\n      console.error(\"‚ùå WebSocket Error:\", error);\n    };\n    socketRef.current.onclose = () => {\n      console.warn(\"‚ö†Ô∏è WebSocket Disconnected. Reconnecting...\");\n      setTimeout(() => {\n        socketRef.current = new WebSocket(\"ws://localhost:8000/ws\");\n      }, 10000);\n    };\n\n    // Cleanup on unmount\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.close();\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83D\\uDE81 Illegal Drone Tracking System\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DroneMap, {\n      droneData: droneData,\n      restrictedZones: restrictedZones,\n      lastUpdated: lastUpdated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DroneUpdates, {\n      droneData: droneData,\n      lastUpdated: lastUpdated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DroneValidation, {\n      droneData: droneData\n      // ... pass any needed props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"rlDgHZvZEpmrqtbUdKbSFkVGoS8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","DroneMap","DroneUpdates","DroneValidation","jsxDEV","_jsxDEV","App","_s","droneData","setDroneData","restrictedZones","setRestrictedZones","lastUpdated","setLastUpdated","socketRef","fetchDroneData","response","fetch","data","json","drones","Date","toLocaleTimeString","error","console","fetchRestrictedZones","restricted_zones","current","WebSocket","onopen","log","onmessage","event","receivedData","JSON","parse","Array","isArray","warn","onerror","onclose","setTimeout","close","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/pradeepgatti/Desktop/IllegalDroneTracking/illegal-drone-tracking/frontend/src/components/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport DroneMap from \"./DroneMap\";\nimport DroneUpdates from \"./DroneUpdates\";\nimport DroneValidation from \"./DroneValidation\";\n\nconst App = () => {\n  // Centralized state for drones and restricted zones\n  const [droneData, setDroneData] = useState([]);\n  const [restrictedZones, setRestrictedZones] = useState([]);\n  const [lastUpdated, setLastUpdated] = useState(\"\");\n  const socketRef = useRef(null);\n\n  useEffect(() => {\n    // 1) Fetch initial data\n    const fetchDroneData = async () => {\n      try {\n        const response = await fetch(\"http://127.0.0.1:8000/fetch-drones-live\");\n        const data = await response.json();\n        setDroneData(data.drones || []);\n        setLastUpdated(new Date().toLocaleTimeString());\n      } catch (error) {\n        console.error(\"Error fetching drone data:\", error);\n        setDroneData([]); // fallback\n      }\n    };\n\n    const fetchRestrictedZones = async () => {\n      try {\n        const response = await fetch(\"http://127.0.0.1:8000/restricted-zones\");\n        const data = await response.json();\n        setRestrictedZones(data.restricted_zones || []);\n      } catch (error) {\n        console.error(\"Error fetching restricted zones:\", error);\n        setRestrictedZones([]);\n      }\n    };\n\n    fetchDroneData();\n    fetchRestrictedZones();\n\n    // 2) Setup WebSocket for live updates\n    socketRef.current = new WebSocket(\"ws://localhost:8000/ws\");\n\n    socketRef.current.onopen = () => {\n      console.log(\"‚úÖ WebSocket Connected\");\n    };\n\n    socketRef.current.onmessage = (event) => {\n      try {\n        const receivedData = JSON.parse(event.data);\n        if (receivedData.drones && Array.isArray(receivedData.drones)) {\n          setDroneData(receivedData.drones);\n          setLastUpdated(new Date().toLocaleTimeString());\n        } else {\n          console.warn(\"‚ö†Ô∏è Unexpected WebSocket Data Format:\", receivedData);\n        }\n      } catch (error) {\n        console.error(\"‚ùå WebSocket Error Parsing Data:\", event.data);\n      }\n    };\n\n    socketRef.current.onerror = (error) => {\n      console.error(\"‚ùå WebSocket Error:\", error);\n    };\n\n    socketRef.current.onclose = () => {\n      console.warn(\"‚ö†Ô∏è WebSocket Disconnected. Reconnecting...\");\n      setTimeout(() => {\n        socketRef.current = new WebSocket(\"ws://localhost:8000/ws\");\n      }, 10000);\n    };\n\n    // Cleanup on unmount\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.close();\n      }\n    };\n  }, []);\n\n  return (\n    <div>\n      <h1>üöÅ Illegal Drone Tracking System</h1>\n      \n      {/* Pass the same data to both components */}\n      <DroneMap \n        droneData={droneData} \n        restrictedZones={restrictedZones} \n        lastUpdated={lastUpdated}\n      />\n      \n      <DroneUpdates \n        droneData={droneData} \n        lastUpdated={lastUpdated} \n      />\n      \n      <DroneValidation \n        droneData={droneData} \n        // ... pass any needed props\n      />\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}